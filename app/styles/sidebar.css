/* ===== Dark Grey Sidebar (smooth) ===== */

/* Fontit (dev: CDN ok, prod: itsehostaa) */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");
@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css");

/* Väriteema */
:root {
  color-scheme: dark;
  --bg:        #0f1115;   /* runko */
  --bg-elev:   #14171d;   /* kortit */
  --bg-soft:   #1a1e25;   /* hover/korostus tausta */
  --ink:       #e7eaf0;   /* teksti */
  --ink-dim:   #c7cbd4;   /* toissijainen */
  --muted:     #9aa3b2;   /* selite */
  --border:    #242a33;   /* reunat */
  --ring:      #6d91ff;   /* focus */
  --hi:        #8ca2ff;   /* korostus-teksti */
  --accent:    #3b82f6;   /* painike/valinta */
  --accent-2:  #6366f1;   /* toissijainen accent */
  --danger:    #ef4444;
  --shadow:    0 10px 24px rgba(0,0,0,.35);
  --radius-lg: 20px;
  --radius-md: 16px;
  --radius-sm: 12px;
}

/* ===== Sidebar perusrakenne ===== */
:where(section[data-testid="stSidebar"]) {
  background: radial-gradient(1200px 600px at 15% -10%, rgba(255,255,255,.03), transparent 60%), var(--bg);
  color: var(--ink);
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  min-width: 300px;
  max-width: 320px;
  border-right: 1px solid var(--border);
}

/* Kollapsi — säilytä fokus mahdollisuus */
:where(section[data-testid="stSidebar"][aria-expanded="false"]) {
  width: 0 !important;
  min-width: 0 !important;
  max-width: 0 !important;
  overflow: hidden;
}

/* Piilota resizer */
:where([data-testid="stSidebarResizer"]) { display: none; }

/* Sisäinen kontti */
:where(section[data-testid="stSidebar"] .block-container) {
  padding: 0 1.1rem 1.4rem;
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  min-height: calc(100vh - 3rem);
}

/* ===== Header ===== */
.sb-header-card {
  display: flex;
  flex-direction: column;
  gap: .8rem;
  padding: 1rem 1rem 1.1rem;
  background: var(--bg-elev);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
}

.sb-logo{ display:flex; justify-content:center; }
.sb-logo img{
  width:100%;
  border-radius: 16px;
  box-shadow: 0 14px 28px rgba(0,0,0,.35);
}

.sb-title-block{ display:flex; flex-direction:column; gap:.2rem; text-align:center; }
.sb-title{
  font-size: 1.35rem;
  font-weight: 700;
  letter-spacing: .02em;
  color: var(--ink);
}
.sb-tagline{
  font-size: .95rem;
  color: var(--muted);
  font-weight: 500;
}

/* ===== Navigation otsikko ===== */
.sb-nav-title{
  display:flex; align-items:center; gap:.6rem; text-transform:uppercase; letter-spacing:.22em;
  margin-top:.2rem; margin-bottom:.2rem;
}
.sb-nav-title .sb-nav-text{
  font-size:.78rem; font-weight:700; color: var(--hi);
}
.sb-nav-underline{
  flex:1 1 auto; height:1px; border-radius:999px; background: var(--border);
}

/* ===== Radio-kortti ===== */
:where(section[data-testid="stSidebar"] div[data-testid="stRadio"]) {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: .7rem;
  padding: 1rem .9rem 1rem;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  background: var(--bg-elev);
  box-shadow: var(--shadow);
  overflow: hidden;
  isolation: isolate;
}

/* Piilota Streamlitin radio-glyph + input */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label input[type="radio"]) {
  position: absolute !important;
  opacity: 0 !important;
  pointer-events: none !important;
  appearance: none !important;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label > div:first-child){
  display: none !important;
}

/* Ryhmä ja labelit */
:where(section[data-testid="stSidebar"] [role="radiogroup"]) {
  display: flex; flex-direction: column; gap: .7rem;
}

:where(section[data-testid="stSidebar"] [role="radiogroup"] > label){
  position: relative;
  display: flex;
  align-items: center;
  gap: .9rem;
  padding: .9rem 1rem .9rem 3.5rem;
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  background: linear-gradient(0deg, rgba(255,255,255,.01), rgba(255,255,255,.01)), var(--bg-elev);
  color: var(--ink);
  font-size: .98rem;
  font-weight: 560;
  transition: transform .18s ease, background .18s ease, border-color .18s ease, color .18s ease, box-shadow .18s ease;
  cursor: pointer;
  overflow: hidden;
  isolation: isolate;
}

/* Dekoratiivinen vasen “pilleri” taustalle */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::before{
  content:"";
  position: absolute;
  left: .9rem;
  top: 50%;
  width: 2.4rem;
  height: 2.4rem;
  border-radius: .9rem;
  background: var(--bg-soft);
  transform: translateY(-50%);
  transition: background .18s ease, transform .18s ease;
  z-index: 0;
}

/* Iso, pehmeä “watermark”-teksti pois -> minimalistinen look, joten ei ::afteria */

/* Ikonialue — FA tai emoji */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-icon){
  position: absolute;
  left: .9rem;
  top: 50%;
  width: 2.4rem;
  height: 2.4rem;
  border-radius: .9rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--ink);
  background: rgba(255,255,255,.03);
  border: 1px solid var(--border);
  transform: translateY(-50%);
  z-index: 1;
}
:where(.sb-nav-icon i){ font-size: 1.05rem; line-height: 1; }

/* Tekstiblokki */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label){
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  gap: .22rem;
  font-weight: 600;
  font-size: 1rem;
  color: inherit;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label)::after{
  content: "Open";
  font-size: .7rem;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--muted);
  transition: color .16s ease, letter-spacing .16s ease, transform .16s ease, opacity .16s ease;
}

/* Hover */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover){
  transform: translateX(4px);
  background: var(--bg-soft);
  border-color: color-mix(in oklab, var(--border), white 6%);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover .sb-nav-label)::after{
  color: var(--ink-dim);
  letter-spacing: .22em;
}

/* Checked */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked)){
  background: linear-gradient(0deg, rgba(99,102,241,.06), rgba(99,102,241,.06)), var(--bg-soft);
  border-color: color-mix(in oklab, var(--accent-2), black 65%);
  box-shadow: 0 12px 26px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.02);
  color: var(--ink);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked)::before){
  background: linear-gradient(0deg, rgba(99,102,241,.18), rgba(59,130,246,.18)), var(--bg-soft);
  transform: translateY(-50%) scale(1.04);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked) .sb-nav-icon){
  background: linear-gradient(0deg, rgba(99,102,241,.18), rgba(59,130,246,.18));
  border-color: color-mix(in oklab, var(--accent), black 45%);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked) .sb-nav-label)::after{
  content: "Selected";
  color: var(--ink-dim);
}

/* Focus-visible (näppäimistö) */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:focus-within){
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--ring), white 15%), 0 0 0 5px rgba(109,145,255,.18);
}

/* Linkkien väri-inherit */
:where(section[data-testid="stSidebar"] a){ color: inherit; text-decoration: none; }
:where(section[data-testid="stSidebar"] a:hover){ color: var(--ink); }

/* ===== Profiilikortti ===== */
.sb-profile-card{
  display:flex; align-items:center; gap:.75rem; margin-top:auto; padding:.8rem .9rem;
  border-radius: var(--radius-md);
  border: 1px solid var(--border);
  background: var(--bg-elev);
  box-shadow: var(--shadow);
}
.sb-profile-avatar{
  width: 44px; height: 44px; border-radius: 50%;
  background: linear-gradient(180deg, #303644, #232834);
  border: 1px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  font-weight: 600; font-size: .95rem; letter-spacing: .04em; color: var(--ink);
  overflow: hidden; position: relative;
}
.sb-profile-avatar::after{ content: attr(data-initials); }
.sb-profile-avatar.has-image::after{ content:""; }
.sb-profile-avatar img{ width:100%; height:100%; object-fit: cover; display:block; }
.sb-profile-meta{ display:flex; flex-direction:column; gap:.15rem; }
.sb-profile-name{ font-weight:600; color: var(--ink); }
.sb-profile-email{ font-size:.82rem; color: var(--muted); }

/* Sign out -nappi */
:where(section[data-testid="stSidebar"] div[data-testid="stButton"]){ width:100%; margin-top:.7rem; }
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"],
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]){
  width:100%;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--danger), black 40%);
  background: color-mix(in oklab, var(--danger), black 88%);
  color: color-mix(in oklab, var(--danger), white 25%);
  font-weight: 600;
  letter-spacing: .02em;
  transition: background .16s ease, color .16s ease, border-color .16s ease, transform .12s ease;
}
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"]:hover,
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]:hover){
  background: color-mix(in oklab, var(--danger), black 80%);
  color: #ffe4e6;
  transform: translateY(-1px);
}
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"]:active,
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]:active){
  transform: translateY(0);
}

/* Footer */
.sb-footer-line{
  margin-top: 1rem;
  padding-top: .9rem;
  border-top: 1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
  font-size: .74rem; letter-spacing: .12em; text-transform: uppercase;
  color: var(--muted);
}
.sb-footer-title{ font-weight: 600; }
.sb-version{ font-weight: 500; }

/* ===== Responsiivisuus ===== */
@media (max-width: 900px){
  :where(section[data-testid="stSidebar"]){ min-width: 260px; max-width: 260px; }
  :where(section[data-testid="stSidebar"] .block-container){ padding: 0 .9rem 1.2rem; }
}
@media (max-width: 520px){
  :where(section[data-testid="stSidebar"] div[data-testid="stRadio"]){ padding: .8rem .7rem .9rem; border-radius: 18px; gap: .6rem; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label){ padding: .8rem .85rem .8rem 3.1rem; border-radius: 14px; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::before,
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-icon){ width: 2.2rem; height: 2.2rem; border-radius: .8rem; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label){ font-size: .96rem; }
  .sb-profile-avatar{ width: 40px; height: 40px; }
}

/* ===== Liikkeen vähennys ===== */
@media (prefers-reduced-motion: reduce){
  * { transition: none !important; animation: none !important; }
}
