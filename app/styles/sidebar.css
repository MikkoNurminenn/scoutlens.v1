/* PATCHED CSS – yhteensopiva FA:n JA emojien kanssa, pehmeämmät selektorit */

/* imports ok deviin; tuotantoon suositus itsehostaa */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");
@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css");

:root { color-scheme: dark; }

:where(section[data-testid="stSidebar"]) {
  background: radial-gradient(circle at 20% 0%, rgba(46,67,110,.68) 0%, rgba(17,24,39,.96) 58%, rgba(9,12,24,.98) 100%), #0b1526;
  color: #f4f7ff;
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  min-width: 300px;
  max-width: 320px;
  border-right: 1px solid rgba(255,255,255,.04);
}

/* kollapsi – säilytä fokus mahdollisuus */
:where(section[data-testid="stSidebar"][aria-expanded="false"]) {
  width: 0 !important;
  min-width: 0 !important;
  max-width: 0 !important;
  overflow: hidden;
}

/* resizer piiloon */
:where([data-testid="stSidebarResizer"]) { display: none; }

:where(section[data-testid="stSidebar"] .block-container) {
  padding: 0 1.25rem 1.75rem;
  display: flex; flex-direction: column; gap: 1.5rem;
  min-height: calc(100vh - 3.25rem);
}

/* === header === */
.sb-header-card { display:flex; flex-direction:column; gap:1rem; padding:1.15rem 1.15rem 1.25rem;
  background: rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.05);
  border-radius:20px; box-shadow:0 20px 35px rgba(8,13,31,.35); backdrop-filter: blur(14px);
}
.sb-logo{ display:flex; justify-content:center; }
.sb-logo img{ width:100%; border-radius:18px; box-shadow:0 22px 38px rgba(12,20,44,.45); }
.sb-title-block{ display:flex; flex-direction:column; gap:.25rem; text-align:center; }
.sb-title{ font-size:1.45rem; font-weight:700; letter-spacing:.06em; text-transform:uppercase; color:#f8fbff;
  text-shadow:0 10px 25px rgba(10,14,28,.6);
}
.sb-tagline{ font-size:.95rem; color:rgba(230,237,255,.75); font-weight:500; }

/* === nav title === */
.sb-nav-title{ position:relative; display:flex; align-items:center; gap:.5rem; margin-bottom:.1rem; text-transform:uppercase; letter-spacing:.32em; }
.sb-nav-title .sb-nav-text{
  font-size:.82rem; font-weight:700; background: linear-gradient(120deg, rgba(247,250,255,.95), rgba(141,178,255,.95));
  -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 12px 24px rgba(14,22,54,.65);
  letter-spacing:.3em;
}
.sb-nav-underline{ flex:1 1 auto; height:1px; border-radius:999px;
  background: linear-gradient(90deg, rgba(96,165,250,.15), rgba(178,208,255,.6), rgba(96,165,250,.15));
  box-shadow:0 0 12px rgba(93,142,255,.45); opacity:.85;
}

/* === radio card === */
:where(section[data-testid="stSidebar"] div[data-testid="stRadio"]) {
  position:relative; display:flex; flex-direction:column; gap:.85rem;
  padding:1.2rem 1.05rem 1.25rem; border-radius:26px;
  border:1px solid rgba(255,255,255,.05);
  background: linear-gradient(160deg, rgba(19,29,54,.92), rgba(11,17,34,.82)), rgba(15,21,36,.72);
  box-shadow:0 28px 48px rgba(6,10,22,.38); backdrop-filter: blur(20px); overflow:hidden; isolation:isolate;
}

/* group + labels */
:where(section[data-testid="stSidebar"] [role="radiogroup"]) { display:flex; flex-direction:column; gap:.85rem; }
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label){
  position:relative; display:flex; align-items:center; gap:1rem;
  padding:1rem 1.25rem 1rem 3.9rem; border-radius:20px;
  border:1px solid rgba(255,255,255,.07);
  background: linear-gradient(145deg, rgba(26,38,72,.9), rgba(17,25,49,.78));
  color:rgba(236,242,255,.86); font-size:.98rem; font-weight:500; line-height:1.28; letter-spacing:.01em;
  box-shadow:0 24px 44px rgba(8,13,31,.38);
  transition: transform .3s ease, background .3s ease, color .3s ease, border-color .3s ease, box-shadow .3s ease, filter .3s ease;
  cursor:pointer; overflow:hidden; isolation:isolate;
}

/* dekoratiiviset loisteet */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::before{ content:""; position:absolute; left:1.05rem; top:50%;
  width:2.7rem; height:2.7rem; border-radius:1rem;
  background: linear-gradient(140deg, rgba(113,143,255,.4), rgba(74,128,255,.18));
  box-shadow:0 16px 34px rgba(28,54,125,.32); transform:translateY(-50%) scale(1); opacity:.92;
  transition: transform .3s ease, opacity .3s ease, background .3s ease, box-shadow .3s ease; z-index:0;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::after{
  content: attr(data-option); position:absolute; right:1.4rem; bottom:-.7rem; font-size:2.35rem; font-weight:700; letter-spacing:.32em;
  color: rgba(255,255,255,.05); text-transform:uppercase; pointer-events:none; opacity:0; transform: translateY(14px);
  transition: opacity .35s ease, transform .35s ease, letter-spacing .35s ease; z-index:0;
}

/* ICON: toimii Font Awesome + emoji */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-icon){
  position:absolute; left:1.15rem; top:50%;
  width:2.7rem; height:2.7rem; border-radius:1rem; display:inline-flex; align-items:center; justify-content:center;
  background: rgba(115,149,255,.16); box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
  backdrop-filter: blur(6px); transform: translateY(-50%) scale(1);
  transition: transform .3s ease, color .3s ease, background .3s ease, box-shadow .3s ease; pointer-events:none; z-index:1;
  color: rgba(222,228,255,.84); text-shadow: 0 10px 22px rgba(17,25,56,.45);
}
/* Font Awesome <i> sisällä */
:where(.sb-nav-icon i){ font-size:1.12rem; line-height:1; }
:where(.sb-nav-icon i[class^="fa-"], .sb-nav-icon i[class*=" fa-"]){ font-weight:900; }

/* Label-teksti */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label){
  position:relative; z-index:1; display:flex; flex-direction:column; gap:.35rem; font-weight:600; font-size:1rem; color:inherit;
  text-shadow:0 12px 30px rgba(10,17,42,.55);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label)::after{
  content:"Open section"; font-size:.72rem; letter-spacing:.26em; text-transform:uppercase; color:rgba(214,225,255,.42);
  transition: color .25s ease, letter-spacing .25s ease, transform .25s ease, opacity .25s ease;
}

/* Hover/focus/checked */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover){
  transform: translateX(6px) scale(1.01); background: linear-gradient(150deg, rgba(58,83,168,.82), rgba(33,51,109,.75));
  border-color: rgba(152,187,255,.55); color: rgba(248,250,255,.96); box-shadow:0 26px 48px rgba(10,19,45,.45);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover)::before{
  transform: translateY(-50%) scale(1.08);
  background: linear-gradient(150deg, rgba(128,160,255,.68), rgba(83,133,255,.32));
  box-shadow: 0 20px 38px rgba(34,66,150,.4);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover)::after{
  opacity:.18; transform: translateY(4px); letter-spacing:.28em;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:hover .sb-nav-icon){
  background: rgba(134,167,255,.24); color:#fff; transform: translateY(-50%) scale(1.06);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), 0 14px 28px rgba(26,48,122,.42);
}

:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked)){
  transform: translateX(4px) scale(1.01);
  background: linear-gradient(145deg, rgba(72,90,255,.9), rgba(46,135,255,.92));
  border-color: rgba(176,206,255,.92); color:#fff;
  box-shadow: 0 30px 52px rgba(14,31,82,.55), inset 0 0 0 1px rgba(255,255,255,.18);
  filter: drop-shadow(0 18px 32px rgba(50,86,175,.3));
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked)::before){
  background: linear-gradient(145deg, rgba(173,191,255,.95), rgba(118,164,255,.6));
  box-shadow: 0 22px 42px rgba(40,78,168,.5); transform: translateY(-50%) scale(1.12); opacity:1;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked)::after){
  opacity:.28; transform: translateY(0); letter-spacing:.26em;
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked) .sb-nav-icon){
  background: linear-gradient(145deg, #6366f1, #3b82f6); color:#fff; transform: translateY(-50%) scale(1.08);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.25), 0 18px 36px rgba(45,92,212,.48);
}
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:has(input:checked) .sb-nav-label)::after{
  content:"Now viewing"; color: rgba(255,255,255,.78); letter-spacing:.35em;
}

/* Focus ring */
:where(section[data-testid="stSidebar"] [role="radiogroup"] > label:focus-within){
  outline:none; box-shadow: 0 0 0 2px rgba(99,102,241,.45), 0 0 0 5px rgba(96,165,250,.28);
}

/* Links inheritance */
:where(section[data-testid="stSidebar"] a){ color:inherit; text-decoration:none; }
:where(section[data-testid="stSidebar"] a:hover){ color:#fff; }

/* profile */
.sb-profile-card{ display:flex; align-items:center; gap:.85rem; margin-top:auto; padding:.9rem 1rem;
  border-radius:18px; border:1px solid rgba(255,255,255,.07); background: rgba(18,24,40,.78);
  box-shadow:0 20px 35px rgba(7,12,26,.38); backdrop-filter: blur(14px);
}
.sb-profile-avatar{ width:46px; height:46px; border-radius:50%; background: linear-gradient(135deg, #5b8def, #3b5bdb);
  box-shadow:0 12px 25px rgba(59,91,219,.55); display:flex; align-items:center; justify-content:center;
  font-weight:600; font-size:.95rem; letter-spacing:.05em; color:#fff; position:relative; overflow:hidden;
}
.sb-profile-avatar::after{ content: attr(data-initials); }
.sb-profile-avatar.has-image::after{ content:""; }
.sb-profile-avatar img{ width:100%; height:100%; object-fit:cover; border-radius:50%; display:block; }
.sb-profile-meta{ display:flex; flex-direction:column; gap:.2rem; }
.sb-profile-name{ font-weight:600; color:#f9fbff; }
.sb-profile-email{ font-size:.8rem; color: rgba(222,229,255,.65); }

/* sign out */
:where(section[data-testid="stSidebar"] div[data-testid="stButton"]){ width:100%; margin-top:.75rem; }
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"],
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]){
  width:100%; border-radius:999px; border:1px solid rgba(248,113,113,.6);
  background: rgba(248,113,113,.12); color: rgba(252,165,165,.95);
  font-weight:600; letter-spacing:.02em;
  transition: background .25s ease, color .25s ease, border-color .25s ease, transform .2s ease;
}
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"]:hover,
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]:hover){
  background: rgba(248,113,113,.2); color:#ffe4e6; border-color: rgba(248,113,113,.8); transform: translateY(-1px);
}
:where(section[data-testid="stSidebar"] div[data-testid="stButton"] button[data-testid="baseButton-secondary"]:active,
       section[data-testid="stSidebar"] div[data-testid="stButton"] button[kind="secondary"]:active){
  transform: translateY(0);
}

/* footer */
.sb-footer-line{ margin-top:1.25rem; padding-top:1.1rem; border-top:1px solid rgba(255,255,255,.06);
  display:flex; align-items:center; justify-content:space-between; font-size:.75rem; letter-spacing:.14em;
  text-transform:uppercase; color: rgba(220,228,255,.6);
}
.sb-footer-title{ font-weight:600; }
.sb-version{ font-weight:500; }

/* responsiivisuus */
@media (max-width: 900px){
  :where(section[data-testid="stSidebar"]){ min-width:260px; max-width:260px; }
  :where(section[data-testid="stSidebar"] .block-container){ padding:0 1rem 1.5rem; }
}
@media (max-width: 520px){
  :where(section[data-testid="stSidebar"] div[data-testid="stRadio"]){ padding:1rem .85rem 1.1rem; border-radius:22px; gap:.75rem; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label){ padding:.85rem .95rem .9rem 3.45rem; border-radius:18px; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::before,
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-icon){ width:2.4rem; height:2.4rem; border-radius:.9rem; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label)::after{ font-size:1.9rem; right:1rem; bottom:-.6rem; letter-spacing:.28em; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label){ font-size:.95rem; gap:.25rem; }
  :where(section[data-testid="stSidebar"] [role="radiogroup"] > label .sb-nav-label)::after{ font-size:.68rem; letter-spacing:.22em; }
}

/* liikkeen vähennys */
@media (prefers-reduced-motion: reduce){
  * { transition:none !important; animation:none !important; }
}

/* backdrop-filter fallback */
@supports not (backdrop-filter: blur(4px)){
  .sb-header-card,
  :where(section[data-testid="stSidebar"] div[data-testid="stRadio"]),
  .sb-profile-card { background: rgba(18,24,40,.88); }
}
